<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>Trang Web C·ªßa Tr√≠ - Tr√°y Ghi Aura</title>
<style>
html, body {margin:0; padding:0; width:100%; height:100%; font-family:Arial,sans-serif; overflow:hidden;}
body {background:url("tri-an-pizza.jpg") no-repeat center center fixed; background-size:cover; color:white; display:flex; justify-content:center; align-items:center;}
.overlay {position:fixed; inset:0; background:rgba(0,0,0,0.25); z-index:0;}
.content, #gameArea, #introMenu, #profileMenu {position:relative; z-index:2; width:90%; max-width:600px; max-height:95vh; overflow-y:auto; padding:20px; text-align:center; background:rgba(0,0,0,0.6); border-radius:15px; display:none;}
button {margin:10px; padding:12px 25px; font-size:18px; border:none; border-radius:10px; cursor:pointer;}
.yt-btn { background:red; color:white; box-shadow:0 0 10px red; }
.next-btn, .check-btn, .reward-btn, .play-btn, .stat-btn { background:yellow; color:black; }
.question-box {background:rgba(0,0,0,0.7); padding:20px; border-radius:15px; margin-top:15px;}
.answer {margin:8px 0; padding:12px; background:rgba(255,255,255,0.2); border-radius:8px; cursor:pointer; border:2px solid transparent;}
.answer.selected {border:2px solid yellow; background:rgba(255,255,150,0.3);}
.main-image {max-width:100%; max-height:45vh; border-radius:10px; margin:15px auto; display:block;}
.phone-box {margin-top:15px; font-size:22px; font-weight:bold; color:black; background:rgba(255,255,255,0.85); padding:10px 20px; border-radius:10px; border:4px solid red; animation:glow 1s infinite alternate;}
@keyframes glow {from{box-shadow:0 0 5px red;} to{box-shadow:0 0 20px yellow;}}
.update-box {margin-top:25px; background:rgba(0,0,0,0.6); padding:15px; border-radius:15px; text-align:left;}
.update-box h2 {text-align:center; color:#ffd700;}
.update-box li {margin:5px 0; font-size:15px;}
.hp-bar {width:100%; height:20px; background:#555; border-radius:10px; margin:5px 0;}
.hp-fill {height:100%; background:lime; border-radius:10px; text-align:center; color:black; font-weight:bold;}
.stats {margin-top:10px; text-align:left;}
#log {height:120px; overflow-y:auto; text-align:left; margin-top:10px; background:rgba(255,255,255,0.1); padding:10px; border-radius:10px;}
#snow {position:fixed; inset:0; pointer-events:none; z-index:1;}
</style>
</head>
<body>
<div class="overlay"></div>
<canvas id="snow"></canvas>

<div class="content" id="mainContent">
    <h1>Ch√†o m·ª´ng ƒë·∫øn trang web c·ªßa Tr√≠!</h1>
    <p>B·∫°n c√≥ th·ªÉ h·ªçc saygex ch·ªâ 4 ƒë√¥ m·ªói th√°ng.</p>
    <img src="tritangquafemboy.jpg" class="main-image">
    <div class="phone-box">‚òéÔ∏è 036-670-1818</div>
    <button class="yt-btn" onclick="startRegister()">ƒêƒÇNG K√ç</button>
    <div class="update-box">
        <h2>üìå C·∫≠p nh·∫≠t website</h2>
        <ul>
            <li>üéÑ Hi·ªáu ·ª©ng tuy·∫øt r∆°i Gi√°ng Sinh</li>
            <li>üß† Test 10 c√¢u h·ªèi c√≥ h√¨nh ·∫£nh</li>
            <li>üéÅ Ph·∫ßn th∆∞·ªüng th·∫Øng / thua</li>
            <li>üéÆ Mini Game World/Stage s·∫Øp ho√†n th√†nh</li>
        </ul>
    </div>
</div>

<div id="introMenu">
    <h1 style="font-size:32px;">Tr√°y Ghi Aura</h1>
    <button class="play-btn" onclick="enterGameHub()">Play</button>
</div>

<div id="profileMenu">
    <h2>Profile: <span id="profileName"></span></h2>
    <p id="profileHP"></p>
    <div class="hp-bar"><div id="profileHPFill" class="hp-fill"></div></div>
    <p id="profileEXP"></p>
    <p id="profileGold"></p>
    <p id="profileLevel"></p>
    <button class="stat-btn" onclick="openStats()">N√¢ng ch·ªâ s·ªë</button>
    <button class="yt-btn" onclick="exitToMenu()">Tho√°t v·ªÅ Menu</button>
</div>

<div id="gameArea">
    <div id="playerProfile" class="stats"></div>
    <div id="shopArea" class="stats">
        <h3>Shop / Gacha</h3><p>Ch∆∞a c√≥ item</p>
    </div>
    <div style="display:inline-block; vertical-align:top;">
        <h2>Worlds</h2><div id="worlds"></div>
    </div>
    <div id="stageSelect" style="display:none;">
        <h2 id="stageTitle"></h2>
        <div id="stages"></div>
        <button onclick="backToHub()">Quay l·∫°i Game Hub</button>
    </div>
    <div id="battleArea" style="display:none;">
        <h2 id="battleTitle"></h2>
        <div id="battleContent">
            <p id="battlePlayer"></p>
            <div class="hp-bar"><div id="battlePlayerHP" class="hp-fill"></div></div>
            <p id="battleMonster"></p>
            <div class="hp-bar"><div id="battleMonsterHP" class="hp-fill"></div></div>
            <div id="actions"></div>
            <div id="log"></div>
            <button onclick="exitToProfile()">Tho√°t v·ªÅ Profile</button>
        </div>
    </div>
</div>

<script>
// ===== TEST + UNLOCK GAME =====
let questions = [
 { img:"giathinh.png", ask:"C√¢u 1: ƒê√¢y l√† con g√¨?", answers:["A. Con m√®o","B. Con ch√≥","C. Con g√†","D. Con heo"], correct:1 },
 { img:"minhtrithamquan.jpg", ask:"C√¢u 2: Tr√≠ th√≠ch g√¨ nh·∫•t?", answers:["A. ƒÇn g√¨","B. Ng·ªß","C. Ch∆°i game","D. C·∫£ 3"], correct:3 },
 { ask:"C√¢u 3: B·∫°n ƒë·∫øn trang n√†y ƒë·ªÉ l√†m g√¨?", answers:["A. Gi·∫£i tr√≠","B. L√†m b√†i test","C. Xem web","D. C·∫£ 3"], correct:3 },
 { img:"phong2.jpg", ask:"C√¢u 4: Trong h√¨nh l√† g√¨?", answers:["A. TP sƒ© aura","B. Con v·∫≠t","C. ƒê·ªì v·∫≠t","D. Kh√¥ng bi·∫øt"], correct:0 },
 { ask:"C√¢u 5: 2 + 2 = ?", answers:["A. 3","B. 4","C. 5","D. 6"], correct:1 },
 { ask:"C√¢u 6: Ai y√™u nhi nh·∫•t?", answers:["A. t√¥i","B. thk ·∫£o aura","C. ko c√≥","D. b·∫°n t√¥i"], correct:1 },
 { ask:"C√¢u 7: M·ªôt tu·∫ßn Tr√≠ ch∆°i game m·∫•y l·∫ßn?", answers:["A. 5","B. 6","C. 7","D. 8"], correct:2 },
 { ask:"C√¢u 8: TP c√≥ h√¨nh g√¨?", answers:["A. Vu√¥ng","B. Tam gi√°c","C. Tr√≤n","D. H√¨nh Pheo.B"], correct:3 },
 { ask:"C√¢u 9: Lo√†i n√†o bi·∫øt bay?", answers:["A. C√° h·ªìi","B. Chim","C. Kh√°c","D. Y√™u femboy"], correct:1 },
 { ask:"C√¢u 10: Ai n√≥i c√¢u 'tao kh√¥ng gi·∫øt ƒë∆∞·ª£c m√†y th√¨ tao l√†m ch√≥'?", answers:["A. TP","B. MT","C. NA","D. TN"], correct:0 }
];
let i=0, score=0, pick=-1;

function startRegister(){
 document.getElementById("mainContent").style.display="none";
 let c = document.getElementById("mainContent");
 c.innerHTML=`<h1>Tr∆∞·ªõc khi ƒëƒÉng k√Ω b·∫°n ph·∫£i ho√†n th√†nh b√†i test!</h1>
 <button class="yt-btn" onclick="startTest()">B·∫ÆT ƒê·∫¶U TEST</button>
 <div id="q"></div>`;
 c.style.display="block";
}

function startTest(){ i=0; score=0; loadQ(); }
function loadQ(){
 let q=questions[i];
 let h=`<div class="question-box"><h2>${q.ask}</h2>`;
 if(q.img) h+=`<img src="${q.img}" class="main-image">`;
 q.answers.forEach((a,n)=>h+=`<div class="answer" onclick="pick=${n};document.querySelectorAll('.answer').forEach(x=>x.classList.remove('selected'));event.target.classList.add('selected')">${a}</div>`);
 h+=`<button class="next-btn" onclick="nextQ()">Ti·∫øp theo</button></div>`;
 document.getElementById("q").innerHTML=h;
}
function nextQ(){
 if(pick==-1){alert("Ch·ªçn ƒë√°p √°n"); return;}
 if(pick==questions[i].correct)score++;
 pick=-1;i++;
 if(i>=10) showResult(); else loadQ();
}
function showResult(){
 document.getElementById("mainContent").innerHTML=
 score==10?
 `<h1 style="color:lightgreen">‚úîÔ∏è B·∫°n ƒë√£ v∆∞·ª£t qua!</h1>
 <button class="reward-btn" onclick="reward(1)">Nh·∫≠n ph·∫ßn th∆∞·ªüng</button>
 <div id="r"></div>
 <button class="yt-btn" onclick="unlockGame()" style="margin-top:10px">M·ªü kh√≥a t√≠nh nƒÉng</button>`:
 `<h1 style="color:red">‚ùå B·∫°n ch∆∞a ƒë·∫°t!</h1>
 <button class="reward-btn" onclick="reward(0)">Nh·∫≠n qu√† an ·ªßi</button>
 <div id="r"></div>`;
}
function reward(w){
 document.getElementById("r").innerHTML = w?`<img src="spiritfruit.webp" class="main-image">`:`<img src="trijumscare.jpg" class="main-image">`;
 if(w) localStorage.setItem("testCompleted","true");
}
function unlockGame(){localStorage.setItem("featureUnlocked","true"); location.reload();}
function showGameButton(){
 if(localStorage.getItem("featureUnlocked")=="true"){
     if(!document.querySelector("#gameButton")){
         let btn=document.createElement("button");
         btn.id="gameButton"; btn.innerText="üéÆ Ch∆°i Game"; btn.className="yt-btn";
         btn.style.position="fixed"; btn.style.left="10px"; btn.style.top="10px"; btn.style.zIndex="999";
         btn.onclick=()=>{document.getElementById("introMenu").style.display="block"; document.getElementById("mainContent").style.display="none";};
         document.body.appendChild(btn);
     }
 }
}
window.onload = showGameButton;

// ===== MINI GAME WORLD/STAGE =====
let player=null, worlds=[], currentWorld=0, currentStage=0, monster=null, turn="player";
const skills=[{name:"C·∫Øn", dmg:8},{name:"H√∫t m√°u", dmg:12},{name:"ƒê·∫•m m·∫°nh", dmg:15}];
for(let w=1;w<=3;w++){
 let stages=[];
 for(let s=1;s<=5;s++){
   stages.push({name:`Qu√°i ${w}-${s}`, hp:20+10*w+5*s, maxHp:20+10*w+5*s, skills:[{name:"ƒê·∫•m", dmg:5+2*s},{name:"R·ªìng l·ª≠a", dmg:6+2*s}], reward:{exp:10*s*w,gold:5*s*w}, done:false});
 }
 worlds.push({world:w, stages:stages});
}
function enterGameHub(){
 document.getElementById("introMenu").style.display="none";
 document.getElementById("gameArea").style.display="block";
 loadPlayer();
 showWorlds();
 updateProfile();
}
function loadPlayer(){
 let saved=localStorage.getItem("playerState");
 if(saved) player=JSON.parse(saved);
 else player={name:"Th·∫ßy gi√°o Tr√°y", hp:120, maxHp:120, exp:0, gold:0, level:1, skills:skills};
}
function savePlayer(){localStorage.setItem("playerState",JSON.stringify(player));}
function updateProfile(){
 document.getElementById("profileName").innerText=player.name;
 document.getElementById("profileHP").innerText=`HP: ${player.hp}/${player.maxHp}`;
 document.getElementById("profileHPFill").style.width=`${player.hp/player.maxHp*100}%`;
 document.getElementById("profileHPFill").innerText=`${player.hp}/${player.maxHp}`;
 document.getElementById("profileEXP").innerText=`EXP: ${player.exp}`;
 document.getElementById("profileGold").innerText=`Gold: ${player.gold}`;
 document.getElementById("profileLevel").innerText=`Level: ${player.level}`;
}
function showWorlds(){
 let container=document.getElementById("worlds"); container.innerHTML="";
 worlds.forEach((w,i)=>{
   let btn=document.createElement("button"); btn.className="yt-btn"; btn.innerText=`World ${w.world}`;
   btn.onclick=()=>showStages(i);
   container.appendChild(btn);
 });
}
function showStages(worldIdx){
 currentWorld=worldIdx;
 document.getElementById("stageSelect").style.display="block";
 document.getElementById("battleArea").style.display="none";
 document.getElementById("stageTitle").innerText=`Ch·ªçn Stage - World ${worlds[worldIdx].world}`;
 let container=document.getElementById("stages"); container.innerHTML="";
 worlds[worldIdx].stages.forEach((stage,idx)=>{
   let btn=document.createElement("button"); btn.innerText=`Stage ${idx+1}`;
   btn.disabled = idx>0 && !worlds[worldIdx].stages[idx-1].done;
   btn.onclick=()=>startBattle(idx);
   container.appendChild(btn);
 });
}
function backToHub(){document.getElementById("stageSelect").style.display="none"; updateProfile(); showWorlds();}

// ===== BATTLE =====
function startBattle(stageIdx){
 currentStage=stageIdx;
 monster=JSON.parse(JSON.stringify(worlds[currentWorld].stages[stageIdx]));
 monster.hp=monster.maxHp;
 turn="player";
 document.getElementById("stageSelect").style.display="none";
 document.getElementById("battleArea").style.display="block";
 document.getElementById("log").innerHTML="";
 updateBattle();
 createActions();
}
function updateBattle(){
 document.getElementById("battlePlayer").innerText=player.name;
 document.getElementById("battlePlayerHP").style.width=`${player.hp/player.maxHp*100}%`;
 document.getElementById("battlePlayerHP").innerText=`${player.hp}/${player.maxHp}`;
 document.getElementById("battleMonster").innerText=monster.name;
 document.getElementById("battleMonsterHP").style.width=`${monster.hp/monster.maxHp*100}%`;
 document.getElementById("battleMonsterHP").innerText=`${monster.hp}/${monster.maxHp}`;
}
function createActions(){
 let actionsDiv=document.getElementById("actions"); actionsDiv.innerHTML="";
 if(player.hp<=0 || monster.hp<=0){
   if(player.hp<=0) actionsDiv.innerHTML=`<button onclick="resetBattle()">Ch∆°i l·∫°i Stage</button>`;
   else actionsDiv.innerHTML=`<button onclick="nextStage()">Sang Stage ti·∫øp theo</button>`;
   return;
 }
 player.skills.forEach(skill=>{
   let btn=document.createElement("button"); btn.className="play-btn"; btn.innerText=skill.name;
   btn.onclick=()=>{
     if(turn!="player") return;
     monster.hp=Math.max(0,monster.hp-skill.dmg);
     document.getElementById("log").innerHTML+=`<p>B·∫°n d√πng ${skill.name}, g√¢y ${skill.dmg} dmg!</p>`;
     updateBattle();
     savePlayer();
     if(monster.hp<=0){
       document.getElementById("log").innerHTML+=`<p>üéâ B·∫°n th·∫Øng!</p>`;
       player.exp+=monster.reward.exp; player.gold+=monster.reward.gold;
       checkLevelUp();
       worlds[currentWorld].stages[currentStage].done=true;
       savePlayer();
       createActions();
       return;
     }
     turn="monster";
     setTimeout(monsterTurn,500);
   };
   actionsDiv.appendChild(btn);
 });
}
function monsterTurn(){
 let skill=monster.skills[Math.floor(Math.random()*monster.skills.length)];
 player.hp=Math.max(0,player.hp-skill.dmg);
 document.getElementById("log").innerHTML+=`<p>${monster.name} d√πng ${skill.name}, g√¢y ${skill.dmg} dmg!</p>`;
 updateBattle(); savePlayer();
 if(player.hp<=0){
   document.getElementById("log").innerHTML+=`<p>üíÄ B·∫°n thua!</p>`;
   createActions();
 }
 turn="player";
}
function resetBattle(){
 monster.hp=monster.maxHp;
 player.hp=player.maxHp;
 updateBattle();
 document.getElementById("log").innerHTML="";
 createActions();
 savePlayer();
}
function nextStage(){
 if(currentStage+1<worlds[currentWorld].stages.length) startBattle(currentStage+1);
 else alert("üéâ B·∫°n ƒë√£ ho√†n th√†nh World n√†y!");
}
function exitToProfile(){
 document.getElementById("battleArea").style.display="none";
 document.getElementById("profileMenu").style.display="block";
 updateProfile();
}
function exitToMenu(){
 document.getElementById("profileMenu").style.display="none";
 document.getElementById("mainContent").style.display="block";
}
function checkLevelUp(){
 let needed=player.level*50;
 if(player.exp>=needed){
   player.level++; player.exp-=needed;
   player.maxHp+=20; player.hp=player.maxHp;
   alert(`üéâ Level Up! Level: ${player.level} - HP tƒÉng +20`);
   savePlayer();
}
}
function openStats(){
 let choice=prompt("Ch·ªçn n√¢ng ch·ªâ s·ªë: 1.Health+10, 2.Dame+2, 3.Speed(placeholder)"); 
 if(choice=="1"){player.maxHp+=10; player.hp=player.maxHp;}
 else if(choice=="2"){player.skills.forEach(s=>s.dmg+=2);}
 savePlayer(); updateProfile();
}

// ===== SNOW =====
const c=document.getElementById("snow"),x=c.getContext("2d");
function rs(){c.width=innerWidth;c.height=innerHeight;}
rs(); window.onresize=rs;
let s=Array.from({length:120},()=>({x:Math.random()*c.width,y:Math.random()*c.height,r:Math.random()*3+1,d:Math.random()+1}));
setInterval(()=>{x.clearRect(0,0,c.width,c.height); x.fillStyle="white"; s.forEach(f=>{x.beginPath(); x.arc(f.x,f.y,f.r,0,Math.PI*2); x.fill(); f.y+=f.d+1; if(f.y>c.height){f.y=0;f.x=Math.random()*c.width;}});},33);
</script>
</body>
</html>























































































