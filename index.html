<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>Trang Web C·ªßa Tr√≠ - Gacha Game Full</title>
<style>
/* RESET */
html, body { margin:0; padding:0; width:100%; height:100%; font-family:Arial,sans-serif; overflow:hidden;}
body { background:url("tri-an-pizza.jpg") no-repeat center center fixed; background-size:cover; display:flex; justify-content:center; align-items:center; color:white;}
.overlay {position:fixed; inset:0; background:rgba(0,0,0,0.25); z-index:0;}
.content {position:relative; z-index:2; width:90%; max-width:600px; max-height:95vh; overflow-y:auto; padding:20px; text-align:center;}
button {margin-top:20px; padding:12px 25px; font-size:18px; border:none; border-radius:10px; cursor:pointer;}
.yt-btn { background:red; color:white; box-shadow:0 0 10px red;}
.next-btn, .check-btn, .reward-btn { background:yellow;}
.question-box {background:rgba(0,0,0,0.6); padding:25px; border-radius:15px; margin-top:20px;}
.answer {margin:10px 0; padding:12px; background:rgba(255,255,255,0.2); border-radius:8px; cursor:pointer; border:2px solid transparent;}
.answer.selected {border:2px solid yellow; background:rgba(255,255,150,0.3);}
.main-image {max-width:100%; max-height:55vh; border-radius:10px; margin:15px auto; display:block;}
.phone-box {margin-top:15px; font-size:22px; font-weight:bold; color:black; background:rgba(255,255,255,0.85); padding:10px 20px; border-radius:10px; border:4px solid red; animation:glow 1s infinite alternate;}
@keyframes glow { from { box-shadow:0 0 5px red;} to { box-shadow:0 0 20px yellow; } }
.update-box { margin-top:25px; background:rgba(0,0,0,0.6); padding:15px; border-radius:15px; text-align:left; }
.update-box h2 { text-align:center; color:#ffd700; }
.update-box li { margin:6px 0; font-size:15px; }
#gameArea {display:none; position:relative; z-index:2; width:600px; height:520px; margin:auto; text-align:center; background:rgba(0,0,0,0.6); border-radius:15px; padding:15px;}
#gameArea button { margin:5px; font-size:16px; }
#playerStats, #monsterStats { margin-top:10px; }
.hp-bar { width:100%; height:20px; background:#555; border-radius:10px; margin:5px 0; }
.hp-fill { height:100%; background:lime; border-radius:10px; text-align:center; color:black; font-weight:bold; }
#log { height:140px; overflow-y:auto; text-align:left; margin-top:10px; background:rgba(255,255,255,0.1); padding:10px; border-radius:10px;}
#snow {position:fixed; inset:0; pointer-events:none; z-index:1;}
</style>
</head>
<body>

<div class="overlay"></div>
<canvas id="snow"></canvas>

<div class="content" id="mainContent">
    <h1>Ch√†o m·ª´ng ƒë·∫øn trang web c·ªßa Tr√≠!</h1>
    <p>B·∫°n c√≥ th·ªÉ h·ªçc saygex ch·ªâ 4 ƒë√¥ m·ªói th√°ng.</p>
    <img src="tritangquafemboy.jpg" class="main-image">
    <div class="phone-box">‚òéÔ∏è 036-670-1818</div>
    <button class="yt-btn" onclick="startRegister()">ƒêƒÇNG K√ç</button>
    <div class="update-box">
        <h2>üìå C·∫≠p nh·∫≠t website</h2>
        <ul>
            <li>üéÑ Hi·ªáu ·ª©ng tuy·∫øt r∆°i Gi√°ng Sinh</li>
            <li>üß† Test 10 c√¢u h·ªèi c√≥ h√¨nh ·∫£nh</li>
            <li>üéÅ Ph·∫ßn th∆∞·ªüng th·∫Øng / thua</li>
            <li>üéÆ T√≠nh nƒÉng game s·∫Øp ho√†n th√†nh</li>
        </ul>
    </div>
</div>

<div id="gameArea">
    <h2>World / Stage Mini Game</h2>
    <div id="playerStats"></div>
    <div id="monsterStats"></div>
    <div id="actions"></div>
    <div id="log"></div>
</div>

<script>
// ===== TEST + PH·∫¶N TH∆Ø·ªûNG =====
let questions = [
 { img:"giathinh.png", ask:"C√¢u 1: ƒê√¢y l√† con g√¨?", answers:["A. Con m√®o","B. Con ch√≥","C. Con g√†","D. Con heo"], correct:1 },
 { img:"minhtrithamquan.jpg", ask:"C√¢u 2: Tr√≠ th√≠ch g√¨ nh·∫•t?", answers:["A. ƒÇn c·ª©t","B. Ng·ªß l·ªç","C. Ch∆°i game femboy","D. C·∫£ 3"], correct:3 },
 { ask:"C√¢u 3: B·∫°n ƒë·∫øn trang n√†y ƒë·ªÉ l√†m g√¨?", answers:["A. Gi·∫£i tr√≠","B. L√†m b√†i test","C. Xem web Tr√≠","D. C·∫£ 3"], correct:3 },
 { img:"phong2.jpg", ask:"C√¢u 4: Trong h√¨nh l√† g√¨?", answers:["A. TP sƒ© aura","B. Con v·∫≠t","C. ƒê·ªì v·∫≠t","D. Kh√¥ng bi·∫øt"], correct:0 },
 { ask:"C√¢u 5: 2 + 2 = ?", answers:["A. ko bt","B. k·ªãch","C.ai h·ªèi","D. dott"], correct:1 },
 { ask:"C√¢u 6: ai y√™u nhi nh·∫•t?", answers:["A. t√¥i","B. thk ·∫£o aura h·ªá th·ªëng","C. ko c√≥","D. b·∫°n t√¥i"], correct:1 },
 { ask:"C√¢u 7: M·ªôt tu·∫ßn tr√≠ l·ªç fem m·∫•y l·∫ßn?", answers:["A. 5","B. 6","C. 7 t·ª∑","D. 8"], correct:2 },
 { ask:"C√¢u 8: TP c√≥ h√¨nh g√¨?", answers:["A. Vu√¥ng","B. Tam gi√°c","C. Tr√≤n","D. H√¨nh Pheo.B"], correct:3 },
 { ask:"C√¢u 9: Lo√†i n√†o bi·∫øt bay?", answers:["A. C√° h·ªìi","B. Chim th√¢m ng∆∞·ªùi ngh·ªá","C. tao gay","D. y√™u femboy"], correct:1 },
 { ask:"C√¢u 10: Ai n√≥i c√¢u 'tao kh√¥ng gi·∫øt ƒë∆∞·ª£c m√†y th√¨ tao l√†m ch√≥'?", answers:["A. TP","B. MT","C. NA","D. TN"], correct:0 }
];
let i=0, score=0, pick=-1;

function startRegister(){
 document.getElementById("mainContent").innerHTML=`<h1>Tr∆∞·ªõc khi ƒëƒÉng k√Ω b·∫°n ph·∫£i ho√†n th√†nh b√†i test!</h1>
 <button class="yt-btn" onclick="startTest()">B·∫ÆT ƒê·∫¶U TEST</button>
 <div id="q"></div>`;
}

function startTest(){ i=0; score=0; load(); }

function load(){
 let q=questions[i];
 let h=`<div class="question-box"><h2>${q.ask}</h2>`;
 if(q.img) h+=`<img src="${q.img}" class="main-image">`;
 q.answers.forEach((a,n)=>h+=`<div class="answer" onclick="pick=${n};document.querySelectorAll('.answer').forEach(x=>x.classList.remove('selected'));event.target.classList.add('selected')">${a}</div>`);
 h+=`<button class="next-btn" onclick="next()">Ti·∫øp theo</button></div>`;
 document.getElementById("q").innerHTML=h;
}

function next(){
 if(pick==-1)return alert("Ch·ªçn ƒë√°p √°n");
 if(pick==questions[i].correct)score++;
 pick=-1; i++;
 if(i>=10) result(); else load();
}

function result(){
 document.getElementById("mainContent").innerHTML=
 score==10?
 `<h1 style="color:lightgreen">‚úîÔ∏è B·∫°n ƒë√£ v∆∞·ª£t qua!</h1>
 <button class="reward-btn" onclick="reward(1)">Nh·∫≠n ph·∫ßn th∆∞·ªüng</button>
 <div id="r"></div>
 <button class="yt-btn" onclick="goMenu()" style="margin-top:10px">M·ªü kh√≥a t√≠nh nƒÉng</button>`
 :
 `<h1 style="color:red">‚ùå B·∫°n ch∆∞a ƒë·∫°t!</h1>
 <button class="reward-btn" onclick="reward(0)">Nh·∫≠n qu√† an ·ªßi</button>
 <div id="r"></div>`;
}

function reward(w){
 document.getElementById("r").innerHTML =
 w?`<img src="spiritfruit.webp" class="main-image">`
 :`<img src="trijumscare.jpg" class="main-image">`;
 if(w) localStorage.setItem("testCompleted","true");
}

function goMenu(){
 localStorage.setItem("featureUnlocked","true");
 location.reload();
}

function showGameButton(){
 if(localStorage.getItem("featureUnlocked")=="true"){
     if(!document.querySelector("#gameButton")){
         let btn = document.createElement("button");
         btn.id="gameButton";
         btn.innerText="üéÆ Ch∆°i Game";
         btn.style.position="fixed";
         btn.style.left="10px";
         btn.style.top="10px";
         btn.style.zIndex="999";
         btn.className="yt-btn";
         btn.onclick = startGameFeature;
         document.body.appendChild(btn);
     }
 }
}
window.onload = function(){ showGameButton(); }

// ===== MINI GAME WORLD + STAGE =====
let player, worlds=[], currentWorld=0, currentStage=0, monster=null, turn="player";

// Kh·ªüi t·∫°o worlds
for(let w=1; w<=4; w++){
 let stages=[];
 for(let s=1; s<=10; s++){
   stages.push({name:`Qu√°i ${w}-${s}`, hp:20+10*w+10*s, maxHp:20+10*w+10*s, skills:[{name:"ƒê·∫•m", dmg:5+2*s},{name:"R·ªìng l·ª≠a", dmg:6+2*s}], reward:{exp:10*s*w,gold:5*s*w}});
 }
 worlds.push({world:w, stages:stages});
}

function startGameFeature(){
 document.getElementById("mainContent").style.display="none";
 document.getElementById("gameArea").style.display="block";
 document.getElementById("log").innerHTML="";
 loadGame();
 loadStage(currentWorld, currentStage);

 // Exit button
 let existingBtn = document.querySelector("#gameArea button.exitBtn");
 if(existingBtn) existingBtn.remove();
 let exitBtn = document.createElement("button");
 exitBtn.innerText="Tho√°t v·ªÅ menu";
 exitBtn.className="exitBtn";
 exitBtn.onclick = ()=>{
    document.getElementById("gameArea").style.display="none";
    document.getElementById("mainContent").style.display="block";
    showGameButton();
 };
 document.getElementById("gameArea").appendChild(exitBtn);
}

function loadStage(w,s){
 currentWorld=w; currentStage=s;
 monster = JSON.parse(JSON.stringify(worlds[w].stages[s]));
 turn="player";
 updateStats();
 createActions();
}

function updateStats(){
 document.getElementById("playerStats").innerHTML = `${player.name} HP: <div class="hp-bar"><div class="hp-fill" style="width:${Math.max(0,player.hp/player.maxHp*100)}%">${player.hp}/${player.maxHp}</div></div> EXP: ${player.exp} Gold: ${player.gold} Level: ${player.level}`;
 if(monster){
   document.getElementById("monsterStats").innerHTML = `${monster.name} HP: <div class="hp-bar"><div class="hp-fill" style="width:${Math.max(0,monster.hp/monster.maxHp*100)}%">${monster.hp}/${monster.maxHp}</div></div>`;
 } else {
   document.getElementById("monsterStats").innerHTML = "";
 }
}

function createActions(){
 let actionsDiv = document.getElementById("actions");
 let logDiv = document.getElementById("log");
 actionsDiv.innerHTML="";
 if(player.hp <= 0 || monster.hp <=0){
     let btn = document.createElement("button");
     btn.innerText = "Ch∆°i l·∫°i Stage";
     btn.onclick = ()=>loadStage(currentWorld,currentStage);
     actionsDiv.appendChild(btn);
     return;
 }

 player.skills.forEach((s)=>{
   let btn = document.createElement("button");
   btn.innerText = s.name;
   btn.onclick = ()=>{
     if(turn!="player") return;
     monster.hp = Math.max(0, monster.hp - s.dmg);
     logDiv.innerHTML += `<p>B·∫°n d√πng ${s.name}, g√¢y ${s.dmg} dmg!</p>`;
     updateStats();
     saveGame();
     if(monster.hp<=0){
       logDiv.innerHTML += `<p>üéâ B·∫°n th·∫Øng Stage!</p>`;
       player.exp += monster.reward.exp;
       player.gold += monster.reward.gold;
       updateStats();
       let nextBtn = document.createElement("button");
       nextBtn.innerText = "Qua Stage ti·∫øp theo";
       nextBtn.onclick = ()=>{
         let nw = currentWorld, ns = currentStage+1;
         if(ns>=worlds[nw].stages.length){ ns=0; nw=(nw+1)%worlds.length; }
         loadStage(nw, ns);
       };
       actionsDiv.innerHTML="";
       actionsDiv.appendChild(nextBtn);
       saveGame();
       return;
     }
     turn="monster";
     setTimeout(monsterTurn,500);
   };
   actionsDiv.appendChild(btn);
 });
}

function monsterTurn(){
 let logDiv = document.getElementById("log");
 let actionsDiv = document.getElementById("actions");
 let skill = monster.skills[Math.floor(Math.random()*monster.skills.length)];
 player.hp = Math.max(0, player.hp - skill.dmg);
 logDiv.innerHTML += `<p>${monster.name} d√πng ${skill.name}, g√¢y ${skill.dmg} dmg!</p>`;
 updateStats();
 if(player.hp<=0){
   logDiv.innerHTML += `<p>üíÄ B·∫°n thua!</p>`;
   actionsDiv.innerHTML="";
   let btn = document.createElement("button");
   btn.innerText = "Ch∆°i l·∫°i Stage";
   btn.onclick = ()=>loadStage(currentWorld,currentStage);
   actionsDiv.appendChild(btn);
 }
 turn="player";
 saveGame();
}

// ===== L∆ØU / LOAD =====
function saveGame(){
 let gameState={player:player};
 localStorage.setItem("currentGame",JSON.stringify(gameState));
}

function loadGame(){
 let saved = localStorage.getItem("currentGame");
 if(saved){
   player = JSON.parse(saved).player;
 } else {
   player = {name:"Th·∫ßy gi√°o Tr√°y", hp:120, maxHp:120, exp:0, gold:0, level:1, skills:[{name:"C·∫Øn",dmg:8},{name:"H√∫t m√°u",dmg:12}]};
 }
}

// ===== HI·ªÜU ·ª®NG TUY·∫æT =====
const c=document.getElementById("snow"),x=c.getContext("2d");
function rs(){c.width=innerWidth;c.height=innerHeight}
rs();window.onresize=rs;
let s=Array.from({length:120},()=>({x:Math.random()*c.width,y:Math.random()*c.height,r:Math.random()*3+1,d:Math.random()+1}));
setInterval(()=>{
 x.clearRect(0,0,c.width,c.height);
 x.fillStyle="white";
 s.forEach(f=>{
  x.beginPath();
  x.arc(f.x,f.y,f.r,0,Math.PI*2);
  x.fill();
  f.y+=f.d+1;
  if(f.y>c.height){f.y=0;f.x=Math.random()*c.width;}
 });
},33);
</script>

</body>
</html>




















































































